CADENCIO - CHANGELOG
Last Updated: 2026-02-18 19:45

===============================================================================
2026-02-18 - Zones Guardrails & Tooltip UX
===============================================================================

FEATURE: Info Tooltips
--------
What Changed (Human):
  - Info icons now open compact tooltips instead of full modals
  - Tooltips close on outside click or Escape

What Changed (Technical):
  - Added anchored tooltip state and positioning for quest/heatmap/cap/zones
  - Added tooltip styling

Files: src/App.tsx, src/index.css

---

FEATURE: Zones Defaults + Manager
--------
What Changed (Human):
  - Zones start with Money In/Out/Obligations and explain how zones work
  - Edit lets you add, rename, or remove custom zones

What Changed (Technical):
  - Seed now creates only zone_hq and renames it to Money In
  - Added ZonesManagerModal with add/rename/delete constraints
  - Zones list uses system row styling and new header actions

Files: src/db/seed.ts, src/App.tsx, src/components/ZonesManagerModal.tsx, src/index.css

---

FEATURE: Transfer Guardrails
--------
What Changed (Human):
  - Transfer shows how much is available in the selected zone
  - Over-limit transfers show a warning and disable Confirm

What Changed (Technical):
  - TransferModal now consumes zoneBalances and validates against available funds
  - Disabled button styling added for pill buttons

Files: src/components/TransferModal.tsx, src/App.tsx, src/index.css

---

FEATURE: Heatmap + Actions Tuning
--------
What Changed (Human):
  - Heatmap ranges start on onboarding day to avoid empty history
  - Recent Actions undo now rolls back only the latest action
  - Planning list shows unplanned obligations first

What Changed (Technical):
  - Clamped heatmap window start to onboardingCompletedAt
  - Adjusted undo to operate on single latest activity id
  - Updated obligation list sorting to prioritize unplanned

Files: src/App.tsx

---

================================================================================
2026-02-17 - Quest Modes & Quest Clarity
================================================================================

FEATURE: Quest Modes & Tiered Selection
--------
What Changed (Human):
  - Main Quest selection now offers Debt Cut, Earned Climb, and Recovery Map with clear difficulty tiers
  - Quest math no longer starts with phantom progress when unlisted debt exists
  - Dashboard labels and info cues help explain what counts toward progress

What Changed (Technical):
  - Added quest kind/tier/baseline/shadow debt support and updated progress calculations by quest type
  - Added info modals for Main Quest, Discipline Heatmap, and Monthly Cap
  - Simplified onboarding Step 5 quest UI and added estimate warnings when inputs are missing

Files: src/components/OnboardingModal.tsx, src/App.tsx, src/index.css, src/types/index.ts

---

================================================================================
2026-02-15 - Debt Tracking, Focus Mode, Heatmap + Cap
================================================================================

FEATURE: Obligations Add Flow
--------
What Changed (Human):
  - You can add obligations directly from the dashboard planning card
  - Borrowed cash is logged from Receive → Borrowed to keep debt and cashflow distinct

What Changed (Technical):
  - Added dashboard Add Obligation modal with name/amount/priority
  - Added Borrowed category to Receive and tagged it as debt_principal
  - Quest progress now uses earned net (cashflow net minus borrowed principal)

Files: src/App.tsx, src/components/TransactionModal.tsx, src/db/seed.ts, src/services/transactions.ts

---

FEATURE: Discipline Heatmap + Monthly Cap
--------
What Changed (Human):
  - Heatmap now reflects real spending in a scrollable GitHub-style grid
  - Monthly cap now shows live usage with weekly mini bars

What Changed (Technical):
  - Added day-level spend aggregation and rolling 30/60/90-day heatmap windows
  - Calculated streaks and cap usage from real OUT transactions

Files: src/App.tsx, src/index.css

---

FEATURE: Focus Mode Masking
--------
What Changed (Human):
  - Money values are hidden with asterisks across passive screens
  - Quest ring shows a percent-only completion readout in Focus Mode

What Changed (Technical):
  - Added focus-mode formatting helpers for amounts
  - Replaced quest ring values with percent when focusMode is enabled

Files: src/App.tsx

---

FEATURE: Recent Actions Scanline
--------
What Changed (Human):
  - Recent Actions now shows date-only and compact M-format amounts

What Changed (Technical):
  - Added M-format helper and adjusted activity meta rendering

Files: src/App.tsx

---

FEATURE: Tooling Hygiene
--------
What Changed (Human):
  - Release notes are now split into a weekly draft and a curated patch format

What Changed (Technical):
  - Ignored build output in ESLint configuration
  - Cleaned unused symbols and tightened type guards for indexing
  - Added a frozen weekly draft patch note file alongside curated notes

Files: eslint.config.js, src/App.tsx, src/components/TransactionModal.tsx, src/services/activities.ts,
       docs/patch-notes/UNRELEASED-0.0.1.md, docs/patch-notes/0.0.1.md

================================================================================
2026-02-13 - UX Fixes, Activity Log, Quest Progress
================================================================================

FEATURE: Onboarding Step 2 Reset Day Validation
--------
What Changed (Human):
  - Reset Day field now validates input (0–30) and shows error message if invalid
  - Next button is disabled until a valid date is entered
  - Disabled button now has gray styling to clearly show it's not clickable
  - Removed duplicate calendar icon inside the input to match Monthly Spending Cap layout
  - Helper text moved into label for cleaner visual hierarchy

What Changed (Technical):
  - Changed clampDay to accept 0–30 (was 1–28)
  - Added isSalaryDayValid computed value for validation state
  - Added conditional disabled prop on Next button for Step 2
  - Removed calendar SVG from onboarding-input-icon wrapper
  - Added disabled styling rules for .onboarding-primary button

Files: src/components/OnboardingModal.tsx, src/index.css

---

FEATURE: ObligationPlanningModal Crash Fix
--------
What Changed (Human):
  - Planning modal no longer crashes with white screen after onboarding

What Changed (Technical):
  - Fixed temporal dead zone issue by moving obligationsList declaration above useEffect
  - obligationsList and current are now defined before the useEffect that depends on obligationsList.length

Files: src/components/ObligationPlanningModal.tsx

---

FEATURE: Obligation Planning UI Simplification
--------
What Changed (Human):
  - Monthly and Split plan types now use the same "Target Date" input as One-time
  - Layout is consistent across all plan types, making the flow easier to understand
  - Removed separate Due Day and Start Month fields for cleaner experience
  - Target Date auto-derives the due day and start month used by the scheduler

What Changed (Technical):
  - Added monthlyTargetDateISO and splitTargetDateISO state
  - Added applyTargetDate helper to derive due day and start month from target date
  - Replaced 3-column Due Day/Start Month inputs with single Target Date input
  - Added margin-bottom: 0 to .onboarding-label inside .planning-card

Files: src/components/ObligationPlanningModal.tsx, src/index.css

---

FEATURE: Recent Actions + Undo
--------
What Changed (Human):
  - Added a Recent Actions card showing the last 5 actions across planning, logging, transfers, and confirmations
  - One-click undo reverts the most recent actions to fix mistakes fast
  - Entries now display the chosen category (Food/Transport/etc.) and clearer labels
  - IN/OUT badges are color-coded and aligned with the card header padding

What Changed (Technical):
  - Added Activity model and Dexie table (version bump)
  - Logged activities for transactions, transfers, planning, and confirm-paid
  - Implemented undo logic with per-action snapshots
  - Added Recent Actions UI in right column with badges and timestamps
  - Updated activity rendering to use category names and direction styling

Files: src/types/index.ts, src/db/database.ts, src/services/activities.ts,
       src/services/transactions.ts, src/services/obligations.ts, src/App.tsx, src/index.css

---

FEATURE: Quest Progress Net Tracking
--------
What Changed (Human):
  - Quest progress now reflects net cash flow (income pushes forward, spending pulls back)
  - Progress never shows below zero, but a net line reveals the true balance
  - Quest Details modal shows net, monthly net, and total in/out
  - Added remaining-to-target and 30-day net trend sparkline
  - Hero Quest ring and labels are larger for clearer readability

What Changed (Technical):
  - Progress computed as clamp(sum(IN) - sum(OUT), 0..target)
  - Transfers excluded from net calculations
  - Hero ring and labels updated to use progress amount + net
  - Added Quest Details modal with summary breakdowns
  - Increased ring dimensions and tuned typography scale

Files: src/App.tsx, src/index.css

---

FEATURE: Last OUT Real Data
--------
What Changed (Human):
  - Last OUT now reflects your latest real OUT transaction
  - Shows hours if monthly income is set; otherwise shows VND

What Changed (Technical):
  - Derived last OUT amount from most recent OUT transaction
  - Calculated cost-per-hour from monthly income and hours/week

Files: src/App.tsx

---

FEATURE: Confirm Paid Reliability
--------
What Changed (Human):
  - Confirm Paid now saves reliably and validates comma-formatted amounts

What Changed (Technical):
  - Expanded Dexie transaction scope to include settings and activities
  - Added digits-only parsing for confirm paid input
  - Added error message feedback on failure

Files: src/services/obligations.ts, src/components/NextActionsCard.tsx, src/App.tsx

================================================================================
2026-02-12 - Dashboard Architecture & Functional Hub
================================================================================

FEATURE: Universal Add & Transaction Modal
--------
What Changed (Human):
  - Added a central "Universal Add" modal to log spending, income, and obligation payments
  - Modal features a large amount input, icon-based category grid, and note field
  - Sized and styled to match the onboarding flow for visual consistency

What Changed (Technical):
  - Created TransactionModal component with tabbed navigation (Spend/Receive/Obligation)
  - Implemented 5-column category grid with vertically-stacked Lucide icons
  - Wired createTransaction service to handle validation and DB persistence
  - Connected entry points from top bar, slim sidebar, and dashboard cards

Files: src/components/TransactionModal.tsx, src/App.tsx, src/index.css

---

FEATURE: Zones & Internal Transfers
--------
What Changed (Human):
  - You can now track where your money lives (HQ, Bank Savings, Hidden Cash)
  - Added a "Transfer" action to move money between zones without counting as spend
  - Zones show live balances with clear + / - signs and green/red color coding

What Changed (Technical):
  - Bumped Dexie DB to version 2; added 'zones' table and seeded defaults
  - Implemented internal_transfer tag and fromZoneId/toZoneId meta for transfers
  - Created TransferModal component for zone-to-zone movements
  - Updated liveQuery to derive real-time balances per zone from the transaction ledger

Files: src/types/index.ts, src/db/database.ts, src/db/seed.ts, 
       src/services/transactions.ts, src/components/TransferModal.tsx, src/App.tsx

---

FEATURE: Dashboard Rework & Hero Quest
--------
What Changed (Human):
  - Sidebar is now slim and icon-only, giving more room for your data
  - Quest card is now a "Hero" section with a large progress ring and descriptive status
  - Zones are prioritized at the top of the right column for immediate visibility
  - Added a "Reset System" button in the sidebar to start over if needed

What Changed (Technical):
  - Refactored sidebar into icon-only button stack with Lucide SVGs
  - Updated dashboard grid to 25/50/25% (1fr 2fr 1fr) column ratio
  - Rebuilt hero-card layout with 2-column flexbox and 160x160 progress ring
  - Applied "Same-day consolidation" to remove shadows and tune content padding

Files: src/App.tsx, src/index.css

---

FEATURE: Obligation Planning Modal Refresh
--------
What Changed (Human):
  - Planning obligations now uses a structured, single-screen layout with a summary strip and plan type controls
  - Added an AI Copilot input placeholder for future natural-language planning
  - Money fields now match onboarding’s VND prefix style with live comma formatting

What Changed (Technical):
  - Rebuilt ObligationPlanningModal layout and controls (summary, AI area, plan tabs, footer)
  - Added CurrencyInput helper for comma-formatted numeric inputs
  - Added planning modal styles and adjusted onboarding input padding for compact layouts

Files: src/components/ObligationPlanningModal.tsx, src/index.css

---

FEATURE: Planning Flow Reliability + Due Soon Window
--------
What Changed (Human):
  - Due Soon now shows obligations due within the next month (not just the next week)
  - Planning flow no longer lands on a blank/error state after confirming a plan

What Changed (Technical):
  - Expanded Due Soon window from 7 → 30 days
  - Clamped planner index and added loading/empty states to prevent null renders

Files: src/App.tsx, src/components/ObligationPlanningModal.tsx

---

FEATURE: Roadmap Documentation Update
--------
What Changed (Human):
  - Added a future roadmap covering AI Copilot, Salary Runbook, and Zone Drill-down

What Changed (Technical):
  - Appended roadmap sections to the spec and README

Files: cadencio-project-spec.md, README.md

---

FEATURE: Onboarding Polish
--------
What Changed (Human):
  - Step 3 now shows a live "Total Obligations" summary between the footer buttons

What Changed (Technical):
  - Added footer-middle alignment styles to index.css
  - Injected sum calculation into OnboardingModal footer

Files: src/components/OnboardingModal.tsx, src/index.css

================================================================================
2026-02-10 - Onboarding UI + Cadencio Rename
================================================================================
2026-02-09 - Phase 1 Scaffold Reset
================================================================================

FEATURE: Fresh Foundation
--------
What Changed (Human):
  - Repository reset and re-initialized to a clean, minimal frontend scaffold
  - Official specs retained as the single source of truth

What Changed (Technical):
  - Added Vite + React + TypeScript + Tailwind baseline
  - Added ESLint baseline and dependency set for the new rebuild

Files: package.json, vite.config.ts, tsconfig.json, tailwind.config.js,
       postcss.config.js, src/main.tsx, src/App.tsx, src/index.css

================================================================================
2026-02-09 - Dashboard Data Wiring
================================================================================

FEATURE: Live Due Soon + Progress Ring
-------------------------------------
What Changed (Human):
  - Due Soon cards now reflect real obligations due in the next 30 days
  - Progress ring now reflects confirmed obligation payments vs quest target
  - Added confirmation modal for marking obligations paid

What Changed (Technical):
  - Added live Dexie query for obligations, quests, transactions, and timezone
  - Computed progress percent from obligation_payment tagged transactions
  - Wired modal flow to confirmObligationPaid service

Files: src/App.tsx

================================================================================
2026-02-10 - Onboarding UI + Cadencio Rename
================================================================================

FEATURE: Cadencio Project Rename
--------
What Changed (Human):
  - Spec and onboarding docs now use Cadencio naming
  - Project file names no longer reference Sovereign Ledger

What Changed (Technical):
  - Renamed spec and onboarding markdown files to Cadencio variants
  - Updated README and spec references to new filenames
  - Synced lockfile names with package.json

Files: README.md, cadencio-project-spec.md, cadencio-onboarding.md,
       package-lock.json, node_modules/.package-lock.json

---

FEATURE: Onboarding Modal Polish
--------
What Changed (Human):
  - Onboarding modal is now a square layout with clearer hierarchy
  - Inputs now show VND formatting with comma separators for large values
  - Obligations list is denser with a single card and clearer priorities

What Changed (Technical):
  - Adjusted modal sizing and typography scale for onboarding screens
  - Added VND prefix handling, comma formatting, and numeric input normalization
  - Refactored obligations list into row-based layout with updated priority colors
  - Tuned toggle switch styling and quest meta spacing

Files: src/components/OnboardingModal.tsx, src/index.css

---

FEATURE: Quest Step Layout Tuning
--------
What Changed (Human):
  - Quest selection icons now match the app theme
  - Step 5 modal expansion keeps footer buttons aligned with earlier steps

What Changed (Technical):
  - Replaced Step 5 emoji icons with inline Lucide SVGs
  - Added step-specific width and footer alignment rules
  - Smoothed modal width transition on Step 5

Files: src/components/OnboardingModal.tsx, src/index.css
